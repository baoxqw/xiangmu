<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	
		<meta name="viewport" 		content="width=device-width, 		initial-scale=1.0,
		minimum-scale=1.0, 		maximum-scale=1.0, 
		user-scalable=no">
		
		<meta name="format-detection" 		content="telephone=no" />
		
		<link rel="stylesheet" href="css/ba.css" />
		<link rel="stylesheet"
	 		href="css/public.css" />
	 	<style>
	 		header{
	 			width:100%;
	 			height: 50px;
	 			background: #d790ed;
	 			text-align: center;
	 			line-height: 50px;
	 			color: #000;
	 			font-size: 24px;
	 		}
	 		h3{
	 			font-size: 24px;
	 			font-family: '宋体';
	 		}
	 		#main{
	 			margin-top: 20px;
	 			color: #000;
	 			font-size: 20px;
	 			color: cornflowerblue;
	 		}
	 		.main1,.main2{
	 			width: 100%;
	 			float: left;
	 			height: 50px;
	 			
	 			margin-bottom: 10px;
	 		}
	 		label{
	 			width:50px;
	 			font-size: 20px;
	 			color: #000;
	 			margin-right: 10px;
	 		}
	 		input{
	 			display:inline-block;
	 			width: 200px;
	 			height: 40px;
	 			border: 2px solid darkgrey;
	 			padding-left: 4px;
	 			margin: 3px;
	 		}
	 		.main2 input{
	 			width: 198px;
	 		}
	 		#btn{
	 			width:100%;
	 			height: 40px;
	 			background:#8f00ba;
	 			text-align: center;
	 			line-height: 40px;
	 			border: 0;
	 			color: #fff;
	 			font-size: 20px;
	 			margin-top: 24px;
	 			font-family: '宋体';
	 		}
	 		#footer{
	 			width: 100%;
	 			height: 40px;
	 			margin-top: 10px;
	 			font-size: 18px;
	 			text-align: center;
	 		}
	 		p{
	 			display: inline-block;
	 			width:80px;
	 			box-sizing: border-box;
	 			padding-left: 4px;
	 			font-size: 14px;
	 		}
	 		footer div{
	 			margin-top: 10px;
	 			background: #8f00ba;
	 			text-align: center;
	 			width: 100%;
	 			color: #fff;
	 			border: 0;
	 			line-height: 50px;
	 			font-size: 20px;
	 			height: 50px;
	 		}
	 	</style>
	</head>
	<body style="height:1000px">
		<header>
			<h3>
				注册
			</h3>
		</header>
		<div id="main">
			<p>账户名：</p>
			<input id="userId" type="text" /><span id="userMsg"></span><br/>
			<p>密码：</p>
			<input id="password" type="password" /><span id="passMsg"></span><br/>
			<p>电子邮箱：</p>
			<input id="email" type="text" /><span id="emailMsg"></span><br/>
			<p>手机号码：</p>
			<input id="mobliePhone" type="text" /><span id="mobliePhoneMsg"></span><br/>
			
		</div>
		<footer>
			<!--<input type="button" name="reg" id="reg" value="注册" />-->
			<div id="regId">注册</div>	
			
		</footer>
	</body>
</html>
<script type="text/javascript">
var flag=0;
window.onload = function(){
	function $(str){
		if(str.charAt(0)=="#"){
			return document.getElementById(str.substring(1));
		}else if(str.charAt(0)=="@"){
			return document.getElementsByName(str.substring(1));
		}
	}
	var inputs=document.getElementsByTagName("input").value;
	
//---------------账户名--------------------------	

	$("#userId").onblur = function(){
		//1、定义规则：数字字母下划线，长度6-12位，不能以数字开头。
		var regObj = /^[a-zA-Z_]\w{5,11}$/;
		if(regObj.test(this.value)){
			$("#userMsg").innerHTML = "√";
			flag=1;
		}else{
			$("#userMsg").innerHTML = "×";
			flag=0;
		}
	}	
//----------------密码--------------------------------	
$("#password").onblur = function(){
		//1、定义规则：
		//身份证号码的规则 一共18位，第一位不能为0，最后一位可以是数字或者x，其余各位都是纯数字。
		//var regObj = /^[1-9]\d{16}[0-9x]$/i;
		var regObj = /^\w{10}/ig;
		if(regObj.test(this.value)){
			$("#passMsg").innerHTML = "√";
			flag=1;
		}else{
			$("#passMsg").innerHTML = "×";
			flag=0;
		}
	}
//---------------电子邮箱--------------------------------
	$("#email").onblur = function(){
		//1、定义规则：
		//邮箱的规则，要有@ 要有. @不能开头，.不能结尾，结尾是com或net或cn或com.cn
		var regObj = /^\w+@+\w+\.(com|net|cn|com.cn)$/i;
		if(regObj.test(this.value)){
			$("#emailMsg").innerHTML = "√";
			flag=1;
		}else{
			$("#emailMsg").innerHTML = "×";
			flag=0;
		}
	}
//-------------------手机号码----------------------------------
	$("#mobliePhone").onblur = function(){
		//1、定义规则：
		//手机号码的规则，1开头，第二位是（3,4,5,7,8,9），一共十一位纯数字
		var regObj = /^1[345789]\d{9}$/i;
		if(regObj.test(this.value)){
			$("#mobliePhoneMsg").innerHTML = "√";
			flag=1;
		}else{
			$("#mobliePhoneMsg").innerHTML = "×";
			flag=0;
		}
	}		
//	$("#regId").onclick=function(){
//	if(flag){
//		location.href="login.html";
//		}
	
//	}
	
	$("#userId").onclick =function(){
		//1、创建对象
		
		let xhr = new XMLHttpRequest();
		let userName = $("#userId").value;
		xhr.open("get","logincheck.php?userId="+userName,true);
		
		//3、回调函数
		xhr.onreadystatechange = function(){
			if(xhr.readyState==4 && xhr.status==200){
				if(xhr.responseText=="1"){
					//保存cookie？？
					alert("亲，该用户名已经注册过了！");
					
				}else{
					location.href="login.html";
				}
			}
		}
		//4、发送请求
		xhr.send();		
	};
	
}


</script>